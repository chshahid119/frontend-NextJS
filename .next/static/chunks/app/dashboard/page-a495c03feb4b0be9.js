(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3559:function(e,t,r){Promise.resolve().then(r.bind(r,7681))},7681:function(e,t,r){"use strict";r.d(t,{AddProductForm:function(){return n}});var a=r(7437),o=r(2265),d=r(8472),s=r(8726);function n(){let[e,t]=(0,o.useState)(""),[r,n]=(0,o.useState)(0),[i,l]=(0,o.useState)(0),[u,c]=(0,o.useState)([]),[m,p]=(0,o.useState)([]),[g,f]=(0,o.useState)(!1),b=()=>{t(""),n(0),l(0),c([]),p([])},h=async e=>{let t=new FormData;t.append("file",e),t.append("upload_preset","gapchap"),t.append("cloud_name","dfd5b7gfr");let r=await fetch("https://api.cloudinary.com/v1_1/dfd5b7gfr/image/upload",{method:"post",body:t});return(await r.json()).url},x=async t=>{if(t.preventDefault(),f(!0),""===e||r<=0||i<=0){s.Am.error("Please fill all fields."),f(!1);return}try{if(u.length<1||u.length>6){s.Am.error("Please upload between 1 and 6 pictures."),f(!1);return}let t=u.map(h),a=await Promise.all(t),o=await d.Z.post("http://www.localhost:5000/api/product/add",{name:e,price:r,quantity:i,userId:"6660a631631322d2b5805ad5",pictures:a});o.data&&o.data?(s.Am.success("Product added successfully"),b()):s.Am.error("Something went wrong. Please try again.")}catch(e){s.Am.error("Something went wrong. Please try again.")}f(!1)};return(0,a.jsx)("div",{className:"flex items-center justify-center bg-gray-100",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-lg",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Add New Product"}),(0,a.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"productName",className:"block text-sm font-medium text-gray-700",children:"Product Name:"}),(0,a.jsx)("input",{type:"text",id:"productName",value:e,onChange:e=>t(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"productPrice",className:"block text-sm font-medium text-gray-700",children:"Product Price:"}),(0,a.jsx)("input",{type:"number",id:"productPrice",value:r,onChange:e=>n(Number(e.target.value)),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"productQuantity",className:"block text-sm font-medium text-gray-700",children:"Product Quantity:"}),(0,a.jsx)("input",{type:"number",id:"productQuantity",value:i,onChange:e=>l(Number(e.target.value)),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"productPictures",className:"block text-sm font-medium text-gray-700",children:"Upload Pictures:"}),(0,a.jsx)("input",{type:"file",id:"productPictures",multiple:!0,accept:"image/*",onChange:e=>{let t=Array.from(e.target.files||[]);c(t),p(t.map(e=>URL.createObjectURL(e)))},className:"mt-1 block w-full text-sm text-gray-900 border border-gray-300 rounded-md cursor-pointer focus:outline-none"})]}),(0,a.jsx)("div",{className:"mt-2 grid grid-cols-3 gap-4",children:m.map((e,t)=>(0,a.jsx)("img",{src:e,alt:"Uploaded ".concat(t),style:{maxWidth:"75px",maxHeight:"75px",margin:"5px"}},t))}),(0,a.jsx)("button",{type:"submit",className:"w-full py-2 px-4 bg-indigo-600 text-white font-semibold rounded-md shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:g,children:g?"Adding...":"Submit"})]})]})})}}},function(e){e.O(0,[726,472,971,23,744],function(){return e(e.s=3559)}),_N_E=e.O()}]);